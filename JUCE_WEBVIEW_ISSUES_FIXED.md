# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è JUCE WebView - –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç

## üî¥ –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–°—Å—ã–ª–∫–∏ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è** - `window.open()` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ JUCE WebView
2. **localStorage –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ** - Email, –ø–∞—Ä–æ–ª—å –∏ –ø—Ä–æ–µ–∫—Ç—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (Frontend)

### 1. –û—Ç–∫—Ä—ã—Ç–∏–µ —Å—Å—ã–ª–æ–∫ —á–µ—Ä–µ–∑ JUCE Bridge

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ç–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è `OPEN_URL` –≤ `juceBridge.ts`
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `openUrlInSystemBrowser()` –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è URL
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `UserMenu.tsx` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç bridge –≤–º–µ—Å—Ç–æ `window.open()`

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –í JUCE WebView ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ `OPEN_URL` –≤ JUCE
- –í –æ–±—ã—á–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `window.open()`

**–§–∞–π–ª—ã:**
- `src/services/audio/juceBridge.ts` - –¥–æ–±–∞–≤–ª–µ–Ω `OPEN_URL` –∏ —Ñ—É–Ω–∫—Ü–∏—è
- `src/components/UserMenu/UserMenu.tsx` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é

---

### 2. –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å localStorage

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –°–æ–∑–¥–∞–Ω `src/utils/storage.ts` —Å –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `isLocalStorageAvailable()` –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ localStorage –æ–±–µ—Ä–Ω—É—Ç—ã –≤ try-catch
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã `auth.ts` –∏ `projects.ts` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å localStorage –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ gracefully
- –ù–µ –∫—Ä–∞—à–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –µ—Å–ª–∏ localStorage –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω

**–§–∞–π–ª—ã:**
- `src/utils/storage.ts` - –Ω–æ–≤—ã–π —Ñ–∞–π–ª —Å —É—Ç–∏–ª–∏—Ç–∞–º–∏
- `src/services/auth.ts` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- `src/services/projects.ts` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

---

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤ JUCE (C++)

### 1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É OPEN_URL

–í —Ñ–∞–π–ª–µ, –≥–¥–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç WebView (–æ–±—ã—á–Ω–æ `PluginProcessor.cpp`):

```cpp
void SairyneAudioProcessor::handleWebViewMessage(const juce::String& messageJson) {
    auto json = juce::JSON::parse(messageJson);
    juce::String messageType = json["type"].toString();
    
    if (messageType == "open_url") {
        // –ü–æ–ª—É—á–∞–µ–º URL –∏–∑ payload
        auto payload = json["payload"];
        juce::String url = payload["url"].toString();
        
        // –û—Ç–∫—Ä—ã–≤–∞–µ–º URL –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ
        juce::URL(url).launchInDefaultBrowser();
        
        return;
    }
    
    // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
}
```

**–î–µ—Ç–∞–ª–∏:** –°–º. `JUCE_BRIDGE_OPEN_URL.md`

---

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å localStorage –≤ WebView

**–ü—Ä–æ–±–ª–µ–º–∞:** localStorage –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –≤ WebView.

**–†–µ—à–µ–Ω–∏–µ 1:** –†–∞–∑—Ä–µ—à–∏—Ç—å localStorage –≤ WebView

–í C++ –∫–æ–¥–µ, –≥–¥–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è WebView:

```cpp
// –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ WebView –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ localStorage
webView->setOptions(juce::WebBrowserComponent::Options()
    .withStorageAccess(true)
    .withJavaScriptEnabled(true));
```

**–†–µ—à–µ–Ω–∏–µ 2:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PropertiesFile (–µ—Å–ª–∏ localStorage –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

–ï—Å–ª–∏ localStorage –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ JUCE:

```cpp
// –í PluginProcessor.h
juce::PropertiesFile* propertiesFile;

// –í PluginProcessor.cpp
void SairyneAudioProcessor::saveUserData(const juce::String& email, const juce::String& password) {
    if (propertiesFile == nullptr) {
        juce::PropertiesFile::Options options;
        options.applicationName = "Sairyne";
        options.filenameSuffix = "settings";
        options.osxLibrarySubFolder = "Application Support";
        propertiesFile = new juce::PropertiesFile(options);
    }
    
    propertiesFile->setValue("user_email", email);
    propertiesFile->setValue("user_password", password);
    propertiesFile->saveIfNeeded();
}
```

---

## üìã –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏—è OPEN_URL

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ —Å—Å—ã–ª–∫—É, frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç:

```json
{
  "type": "open_url",
  "payload": {
    "url": "https://www.sairyne.net"
  },
  "timestamp": 1234567890
}
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### –î–ª—è —Å—Å—ã–ª–æ–∫:
1. ‚úÖ –ù–∞–∂–º–∏—Ç–µ "Sairyne Website" ‚Üí –¥–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å–∏—Å—Ç–µ–º–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä
2. ‚úÖ –ù–∞–∂–º–∏—Ç–µ "Leave feedback" ‚Üí –¥–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å–∏—Å—Ç–µ–º–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ JUCE - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ `OPEN_URL`

### –î–ª—è localStorage:
1. ‚úÖ –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É ‚Üí email –∏ –ø–∞—Ä–æ–ª—å –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è
2. ‚úÖ –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç ‚Üí –ø—Ä–æ–µ–∫—Ç –¥–æ–ª–∂–µ–Ω —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è
3. ‚úÖ –°–≤–µ—Ä–Ω–∏—Ç–µ –ø–ª–∞–≥–∏–Ω ‚Üí –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞—Ç—å—Å—è –ø–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ) - –Ω–µ—Ç –æ—à–∏–±–æ–∫ localStorage

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ localStorage

–ï—Å–ª–∏ localStorage –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:**
```javascript
console.log('localStorage test:', (() => {
  try {
    window.localStorage.setItem('test', 'value');
    const result = window.localStorage.getItem('test') === 'value';
    window.localStorage.removeItem('test');
    return result;
  } catch {
    return false;
  }
})());
```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ WebView –≤ C++:**
```cpp
// –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ localStorage —Ä–∞–∑—Ä–µ—à–µ–Ω
webView->setOptions(juce::WebBrowserComponent::Options()
    .withStorageAccess(true));
```

3. **–ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ PropertiesFile:**
   - –°–º. –ø—Ä–∏–º–µ—Ä –≤—ã—à–µ
   - –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –¥–∏—Å–∫ —á–µ—Ä–µ–∑ JUCE
   - –ß–∏—Ç–∞–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–ª–∞–≥–∏–Ω–∞

---

## üìù –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç

### Frontend (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ):
- [x] –î–æ–±–∞–≤–ª–µ–Ω `OPEN_URL` –≤ JUCE bridge
- [x] –û–±–Ω–æ–≤–ª–µ–Ω `UserMenu` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è bridge
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è localStorage
- [x] –û–±–Ω–æ–≤–ª–µ–Ω—ã `auth.ts` –∏ `projects.ts`
- [x] –ü—Ä–æ–µ–∫—Ç —Å–æ–±—Ä–∞–Ω –∏ –∑–∞–¥–µ–ø–ª–æ–µ–Ω

### JUCE (–Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å):
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É `OPEN_URL` –≤ C++
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ WebView –¥–ª—è localStorage
- [ ] –ï—Å–ª–∏ localStorage –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PropertiesFile
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç–∏–µ —Å—Å—ã–ª–æ–∫
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

---

## üöÄ –ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ JUCE

1. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ JUCE –ø—Ä–æ–µ–∫—Ç
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ Ableton:
   - ‚úÖ –°—Å—ã–ª–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ
   - ‚úÖ Email –∏ –ø–∞—Ä–æ–ª—å —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
   - ‚úÖ –ü—Ä–æ–µ–∫—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
   - ‚úÖ –î–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –ø–æ—Å–ª–µ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è

---

**–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥–æ—Ç–æ–≤—ã! –û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `OPEN_URL` –≤ JUCE! üéâ**

