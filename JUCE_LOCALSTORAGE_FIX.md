# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ localStorage –≤ JUCE WebView

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞

localStorage –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ (email, –ø–∞—Ä–æ–ª—å, –ø—Ä–æ–µ–∫—Ç—ã) –≤ JUCE WebView, —Ö–æ—Ç—è –Ω–∞ frontend –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –í–∫–ª—é—á–µ–Ω localStorage –≤ WebView

–î–æ–±–∞–≤–ª–µ–Ω—ã –æ–ø—Ü–∏–∏ –≤ `WebBrowserComponent::Options`:
```cpp
.withStorageAccess(true)  // Enable localStorage
.withJavaScriptEnabled(true)  // Ensure JavaScript is enabled
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω PropertiesFile –¥–ª—è fallback

–ï—Å–ª–∏ localStorage –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JUCE PropertiesFile –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –¥–∏—Å–∫.

**–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ PluginProcessor.h:**
```cpp
std::unique_ptr<juce::PropertiesFile> propertiesFile;
juce::PropertiesFile* getPropertiesFile();
```

**–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ PluginProcessor.cpp:**
- –ú–µ—Ç–æ–¥ `getPropertiesFile()` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–ø–æ–ª—É—á–µ–Ω–∏—è PropertiesFile
- PropertiesFile —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤: `~/Library/Application Support/Sairyne/Sairyne.settings.xml`

### 3. –î–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç localStorage –≤ helper script

Helper script —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å localStorage –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏ –ª–æ–≥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø–ª–∞–≥–∏–Ω–∞ –≤ –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
[Helper] localStorage is available
```

–ò–ª–∏:
```
[Helper] localStorage test failed - data not persisted
[Helper] localStorage is not available: ...
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–∏ –¥–∞–Ω–Ω—ã–µ

1. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É (email + –ø–∞—Ä–æ–ª—å)
2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
3. –ó–∞–∫—Ä–æ–π—Ç–µ –ø–ª–∞–≥–∏–Ω
4. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–ª–∞–≥–∏–Ω —Å–Ω–æ–≤–∞
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –æ—Å—Ç–∞–ª–∏—Å—å –ª–∏ –¥–∞–Ω–Ω—ã–µ

---

## üîß –ï—Å–ª–∏ localStorage –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ WebView

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ WebView –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
- `withStorageAccess(true)` - –≤–∫–ª—é—á–µ–Ω–æ ‚úÖ
- `withJavaScriptEnabled(true)` - –≤–∫–ª—é—á–µ–Ω–æ ‚úÖ

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PropertiesFile —á–µ—Ä–µ–∑ JUCE bridge

–ï—Å–ª–∏ localStorage –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ JUCE bridge:

1. Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `juceBridge.sendMessage()` —Å —Ç–∏–ø–æ–º `SAVE_DATA`
2. JUCE –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ PropertiesFile
3. –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ JUCE –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ–±—Ä–∞—Ç–Ω–æ –≤ frontend

**–≠—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, –Ω–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ.**

---

## üìù –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

- ‚úÖ localStorage –≤–∫–ª—é—á–µ–Ω –≤ WebView (`withStorageAccess(true)`)
- ‚úÖ JavaScript –≤–∫–ª—é—á–µ–Ω (`withJavaScriptEnabled(true)`)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç localStorage –≤ helper script
- ‚úÖ PropertiesFile –≥–æ—Ç–æ–≤ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è)

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ JUCE –ø—Ä–æ–µ–∫—Ç**
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**
   - –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É
   - –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
   - –ó–∞–∫—Ä–æ–π—Ç–µ –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –ø–ª–∞–≥–∏–Ω
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –æ—Å—Ç–∞–ª–∏—Å—å –ª–∏ –¥–∞–Ω–Ω—ã–µ

3. **–ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –æ localStorage
   - –ï—Å–ª–∏ localStorage –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ JUCE bridge + PropertiesFile

---

**–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–∞—á–∞–ª–∞ —Å –≤–∫–ª—é—á–µ–Ω–Ω—ã–º localStorage. –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - —Å–æ–æ–±—â–∏—Ç–µ, –∏ —è –¥–æ–±–∞–≤–ª—é —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ JUCE bridge! üöÄ**

